<div class="modal fade show">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Leave Request</h5>
        <button
          mat-mini-fab
          color="warn"
          class="close"
          aria-label="Close"
          (click)="modalClose()"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <div class="modal-body scrollable-modal-body" cRow [gutter]="3">
        <div class="container mt-4">
          <c-card>
            <c-card-body>
              <div class="mb-4">
                <c-row>
                  <c-col [md]="2">
                    <strong>PMS_ID:</strong>
                  </c-col>
                  <c-col [md]="4"> {{leaveData.idCardNo}} </c-col>
                </c-row>
                <c-row>
                  <c-col [md]="2">
                    <strong>Emp_Name:</strong>
                  </c-col>
                  <c-col [md]="4"> {{leaveData.empFirstName + " " + leaveData.empLastName}} </c-col>
                </c-row>
                <c-row>
                  <c-col [md]="2">
                    <strong>Leave type:</strong>
                  </c-col>
                  <c-col [md]="4"> {{leaveData.leaveTypeName}} </c-col>
                </c-row>
                <c-row>
                  <c-col [md]="2">
                    <strong>Duration:</strong>
                  </c-col>
                  <c-col [md]="4"> {{this.totalLeave}} days </c-col>
                </c-row>
                <c-row>
                  <c-col [md]="2">
                    <strong>Dates:</strong>
                  </c-col>
                  <c-col [md]="4"> {{leaveData.fromDate|date}} to {{leaveData.toDate | date}} </c-col>
                </c-row>
                <c-row>
                  <c-col [md]="2">
                    <strong>Status:</strong>
                  </c-col>
                  <c-col [md]="4"> {{leaveStatusOption[leaveData.status]}} </c-col>
                </c-row>
              </div>
              <h5 class="mb-3">Foreign Leave</h5>
              <div class="mb-4">
                <c-row>
                  <c-col [md]="2">
                    <strong>Country:</strong>
                  </c-col>
                  <c-col [md]="4">
                    {{leaveData.countryName}}
                  </c-col>
                </c-row>
                <c-row>
                  <c-col [md]="2">
                    <strong>Purpose:</strong>
                  </c-col>
                  <c-col [md]="4">
                    {{leaveData.foreignLeavePurpose}}
                  </c-col>
                </c-row>
                <c-row>
                  <c-col [md]="2">
                    <strong>Accompany:</strong>
                  </c-col>
                  <c-col [md]="4">
                    {{leaveData.accompanyBy}}
                  </c-col>
                </c-row>
              </div>
              <h5 class="mb-3">Leave Associate File Upload</h5>
              <div class="mb-4">
                <c-row>
                  <c-col [md]="2">
                    <strong>File:</strong>
                  </c-col>
                  <c-col [md]="6">
                    @if (leaveFiles.length>0) {
                      <p-table styleClass="p-datatable-striped" [value]="leaveFiles">
                        <ng-template pTemplate="header">
                          <tr>
                            <th>FileName</th>
                            <th>Action</th>
                          </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-file>
                          <tr>
                            <td>{{file.fileTitle}}</td>
                            <td>
                              <a target="_blank" [href]="baseImageUrl+'/leaveFile/'+file.filePath">
                                <mat-icon aria-hidden="false" aria-label="Download Leave File" fontIcon="download"></mat-icon>
                              </a>
                            </td>
                          </tr>
                        </ng-template>
                      </p-table>
                    } @else {
                      No Associated File
                    } 
                  </c-col>
                </c-row>
              </div>
            </c-card-body>
          </c-card>
        </div>
      </div>
      <div class="modal-footer">
        <div *ngIf="CanApprove==true" class="mt-3">
          <button cButton 
          color="success" 
          [disabled]="loading"
          (click)="approveLeaveRequest()" 
          class="me-2">Approve</button>
          <button 
          cButton 
          [disabled]="loading"
          color="danger" 
          (click)="denyLeaveRequest()">Reject</button>
        </div>
      </div>
    </div>
  </div>
</div>
